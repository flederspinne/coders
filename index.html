<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Coders</title>
    <link rel="stylesheet" href="reset_CSS.css">
    <link rel="stylesheet" href="style.css">
    <script src="jquery-3.2.1.min.js"></script>
    <script src="main.js"></script>
    <script src="functions.js"></script>
    <script src="classes.js"></script>
</head>
<body>

<div id="choose_human_form" class="info_fields">
    <p class="text_center">Добавьте сотрудника:</p>
    <select id="human_selection" class="field choose_human_form_input">
        <option value="coder" id="select_coder">Программист</option>
        <option value="tester" id="select_tester">Тестировщик</option>
        <option value="techwriter" id="select_techwriter">Технический писатель</option>
        <option value="designer" id="select_designer">Веб-дизайнер</option>
        <option value="manager" id="select_manager">Менеджер</option>
    </select>
    <button id="submit_choose_human_form" class="button">Выбрать</button>
</div>

<div id="add_coder_form" class="info_fields">
    <p class="text_center">Новый программист:</p>
    <div class="add_form_group_span">
        <span class="add_form_text">Имя:</span>
        <span class="add_form_text">Пол:</span>
        <span class="add_form_text">Опыт:</span>
        <span class="add_form_text">Язык:</span>
    </div>

    <div class="add_form_group_input">
        <input type="text" id="coder_name" name="name" class="add_form_input"/><br>
        <input type="radio" id="coder_gender_m" value="m" name="gender" />
            <span class="add_form_text">М</span>
        <input type="radio" id="coder_gender_f" value="f" name="gender" />
            <span class="add_form_text">Ж</span><br>
        <input type="text" id="coder_skill" name="skill" class="add_form_input"/>
        <input type="text" id="coder_lang_0" name="lang" class="add_form_input"/>
        <button id="add_coder_lang" class="button">+</button>
    </div>
    <br>
    <button id="submit_add_coder_form" class="button">Готово</button>
</div>

<div id="add_tester_form" class="info_fields">
    <p class="text_center">Новый тестировщик:</p>
    <div class="add_form_group_span">
        <span class="add_form_text">Имя:</span>
        <span class="add_form_text">Пол:</span>
        <span class="add_form_text">Опыт:</span>
    </div>

    <div class="add_form_group_input">
        <input type="text" id="tester_name" name="name" class="add_form_input"/><br>
        <input type="radio" id="tester_gender_m" value="m" name="gender" />
        <span class="add_form_text">М</span>
        <input type="radio" id="tester_gender_f" value="f" name="gender" />
        <span class="add_form_text">Ж</span><br>
        <input type="text" id="tester_skill" name="skill" class="add_form_input"/>
    </div>
    <br>
    <button id="submit_add_tester_form" class="button">Готово</button>
</div>

<div id="add_techwriter_form" class="info_fields">
    <p class="text_center">Новый технический писатель:</p>
    <div class="add_form_group_span">
        <span class="add_form_text">Имя:</span>
        <span class="add_form_text">Пол:</span>
        <span class="add_form_text">Опыт:</span>
    </div>

    <div class="add_form_group_input">
        <input type="text" id="techwriter_name" name="name" class="add_form_input"/><br>
        <input type="radio" id="techwriter_gender_m" value="m" name="gender" />
        <span class="add_form_text">М</span>
        <input type="radio" id="techwriter_gender_f" value="f" name="gender" />
        <span class="add_form_text">Ж</span><br>
        <input type="text" id="techwriter_skill" name="skill" class="add_form_input"/>
    </div>
    <br>
    <button id="submit_add_techwriter_form" class="button">Готово</button>
</div>

<div id="add_designer_form" class="info_fields">
    <p class="text_center">Новый веб-дизайнер:</p>
    <div class="add_form_group_span">
        <span class="add_form_text">Имя:</span>
        <span class="add_form_text">Пол:</span>
        <span class="add_form_text">Опыт:</span>
        <span class="add_form_text">Язык:</span>
    </div>

    <div class="add_form_group_input">
        <input type="text" id="designer_name" name="name" class="add_form_input"/><br>
        <input type="radio" id="designer_gender_m" value="m" name="gender" />
        <span class="add_form_text">М</span>
        <input type="radio" id="designer_gender_f" value="f" name="gender" />
        <span class="add_form_text">Ж</span><br>
        <input type="text" id="designer_skill" name="skill" class="add_form_input"/>
        <input type="text" id="designer_lang_0" name="lang" class="add_form_input"/>
        <button id="add_designer_lang" class="button">+</button>
    </div>
    <br>
    <button id="submit_add_designer_form" class="button">Готово</button>
</div>

<div id="add_manager_form" class="info_fields">
    <p class="text_center">Новый менеджер:</p>
    <div class="add_form_group_span">
        <span class="add_form_text">Имя:</span>
        <span class="add_form_text">Пол:</span>
        <span class="add_form_text">Опыт:</span>
    </div>

    <div class="add_form_group_input">
        <input type="text" id="manager_name" name="name" class="add_form_input"/><br>
        <input type="radio" id="manager_gender_m" value="m" name="gender" />
        <span class="add_form_text">М</span>
        <input type="radio" id="manager_gender_f" value="f" name="gender" />
        <span class="add_form_text">Ж</span><br>
        <input type="text" id="manager_skill" name="skill" class="add_form_input"/>
    </div>
    <br>
    <button id="submit_add_manager_form" class="button">Готово</button>
</div>

<p id="wanna_add_another_human" class="text label">Добавить ещё сотрудника или перейти к настройкам?</p>

<button id="button_settings" class="button button_big">Настройки</button>

<div id="settings_form" class="settings_fields">
    <div class="settings_form_group_span">
        <label for="emergency_checkbox">Режим аварии</label>
        <br>
        <span class="add_form_text">Время на проект:</span>
    </div>
    <div class="settings_form_group_input">
        <input id="emergency_checkbox" type="checkbox">
        <br>
        <input type="text" id="time_for_project_input" class="settings_form_input" value="5"/>
        <span class="add_form_text">рабочих дней</span>
    </div>
</div>

<button id="button_simulation_start" class="button button_big">Начать симуляцию</button>

<div id="simulation_screen">
    <div id="simulation_log"></div>
</div>

<script>

    // Ограничения области видимости не позволяют перенести код в какой-то из модулей.
    $('#submit_choose_human_form').click(function() {
        $('#choose_human_form').css("visibility", "hidden");
        $('#wanna_add_another_human').css("visibility", "hidden");
        $('#button_settings').css("visibility", "hidden");
        $('#add_' + $('#human_selection').val() + '_form').css("visibility", "visible");
    });

    // -----------------------------------------------------------------------------------------------------------------

    $('#submit_add_coder_form').click(function() {

        get_gender();

        let coder_lang_arr = [];
        for (let i = 0; i <= coder_lang_index; i++) {
            coder_lang_arr[coder_lang_arr.length] = $('#coder_lang_' + i).val();
        }
        add_human ("coder", coders, $('#coder_name').val(), gender_val, $('#coder_skill').val(),
            coder_lang_arr);

        $('#coder_name').val("");
        $('#coder_gender_m').prop("checked", false);
        $('#coder_gender_f').prop("checked", false);
        $('#coder_skill').val("");
        $('#coder_lang_0').val("");
        for (let i = 1; i <= coder_lang_index; i++) {
            $('#coder_lang_' + i).remove();
        }

        coder_lang_index = 0;
    });

    $('#submit_add_tester_form').click(function() {
        get_gender();

        add_human ("tester", testers, $('#tester_name').val(), gender_val, $('#tester_skill').val());

        $('#tester_name').val("");
        $('#tester_gender_m').prop("checked", false);
        $('#tester_gender_f').prop("checked", false);
        $('#tester_skill').val("");
    });

    $('#submit_add_techwriter_form').click(function() {
        get_gender();

        add_human ("techwriter", techwriters, $('#techwriter_name').val(), gender_val, $('#techwriter_skill').val());

        $('#techwriter_name').val("");
        $('#techwriter_gender_m').prop("checked", false);
        $('#techwriter_gender_f').prop("checked", false);
        $('#techwriter_skill').val("");
    });

    $('#submit_add_designer_form').click(function() {

        get_gender();

        let designer_lang_arr = [];
        for (let i = 0; i <= designer_lang_index; i++) {
            designer_lang_arr[designer_lang_arr.length] = $('#designer_lang_' + i).val();
        }
        add_human ("designer", designers, $('#designer_name').val(), gender_val, $('#designer_skill').val(),
            designer_lang_arr);

        $('#designer_name').val("");
        $('#designer_gender_m').prop("checked", false);
        $('#designer_gender_f').prop("checked", false);
        $('#designer_skill').val("");
        $('#designer_lang_0').val("");
        for (let i = 1; i <= designer_lang_index; i++) {
            $('#designer_lang_' + i).remove();
        }

        designer_lang_index = 0;
    });

    $('#submit_add_manager_form').click(function() {
        get_gender();

        add_human ("manager", managers, $('#manager_name').val(), gender_val, $('#manager_skill').val());

        $('#manager_name').val("");
        $('#manager_gender_m').prop("checked", false);
        $('#manager_gender_f').prop("checked", false);
        $('#manager_skill').val("");
    });

    // -----------------------------------------------------------------------------------------------------------------

    // TODO: добавить возможность удалять пустые поля, а то добавляются пустые языки.
    // TODO: при добавлении следующего программиста остаётся столько же пустых полей
    // для ввода языков, сколько осталось после предыдущего программиста.
    $('#add_coder_lang').click(function () {
        if (coder_lang_index <= 6) {
            $('#coder_lang_' + coder_lang_index).after("<input type=\"text\" id='coder_lang_" +
                (coder_lang_index + 1) + "' name=\"lang'\" class=\"add_form_input\"/>");
            coder_lang_index++;
            if (coder_lang_index == 6) {
                $('#add_coder_lang').css("visibility", "hidden");
            }
        }
    });

    $('#add_designer_lang').click(function () {
        $('#designer_lang_' + designer_lang_index).after("<input type=\"text\" id='designer_lang_" +
            (designer_lang_index + 1) + "' name=\"lang'\" class=\"add_form_input\"/>");
        designer_lang_index++;
    });

    // -----------------------------------------------------------------------------------------------------------------

    $('#button_settings').click(function () {
        $('#wanna_add_another_human').css("visibility", "hidden");
        $('#choose_human_form').css("visibility", "hidden");
        $('#button_settings').css("visibility", "hidden");
        $('#settings_form').css("visibility", "visible");
        $('#button_simulation_start').css("visibility", "visible");
    });

    // -----------------------------------------------------------------------------------------------------------------

    $('#button_simulation_start').click(function () {
        $('#settings_form').css("visibility", "hidden");
        $('#button_simulation_start').css("visibility", "hidden");
        $('#simulation_screen').css("visibility", "visible");

        // TODO: Сделать нормальный расчёт!
        time_for_project = $('#time_for_project_input').val();
        current_project = new Project(time_for_project);


        initialize_day();

        // let misha = new Tester("Миша", "m", 1000);
        // start_working_day(misha);

        /* let max = new Coder("max", "m", 100, ["C++", "C#"]);
        let nastya = new Coder("nastya", "f", 100, ["C++"]);
        let ololosha = new Coder("ololosha", "f", 100, ["C++"]);

        start_working_day(nastya);
        start_working_day(ololosha);
        start_working_day(max); */

        // start_working_day(coders[0]);
    });

    // -----------------------------------------------------------------------------------------------------------------

    $(document).ready(function () {
        input_fields_width_align();
    });

    $(window).resize(function () {
        input_fields_width_align();
    });

</script>

</body>
</html>